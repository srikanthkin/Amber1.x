<!doctype html>
<html lang="en">
<head>
        <% include ../common/header %>
        <% include ../common/scripts %>

	   <meta charset="utf-8" />
	   <link rel="icon" type="image/png" href="/images/favicon.ico">
	   <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	   <title>Project Details</title>
           <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
	   <meta name="viewport" content="width=device-width" />
	    <!-- To use it for Materialise CSS forms -->
	    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">   
	    <!-- Bootstrap core CSS     -->
	    <link href="/css/bootstrap.min.css" rel="stylesheet" />
	    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment-with-locales.min.js"></script>
            <script type="text/javascript" src="//code.jquery.com/jquery-1.11.0.js"></script>
            <script type="text/javascript" src="http://amsul.ca/pickadate.js/vendor/pickadate/lib/picker.js"></script>
            <script type="text/javascript" src="http://amsul.ca/pickadate.js/vendor/pickadate/lib/picker.date.js"></script>
            <script type="text/javascript" src="http://amsul.ca/pickadate.js/vendor/pickadate/lib/picker.time.js"></script>
            <link rel="stylesheet" type="text/css" href="http://amsul.ca/pickadate.js/vendor/pickadate/lib/themes/classic.css">
            <link rel="stylesheet" type="text/css" href="http://amsul.ca/pickadate.js/vendor/pickadate/lib/themes/classic.date.css">
            <link rel="stylesheet" type="text/css" href="http://amsul.ca/pickadate.js/vendor/pickadate/lib/themes/classic.time.css">
	    <!-- Animation library for notifications   -->
	    <link href="/css/animate.min.css" rel="stylesheet"/>
	    <!--  Light Bootstrap Table core CSS    -->
	    <link href="/css/light-bootstrap-dashboard.css" rel="stylesheet"/>
	    <!--  CSS for Demo Purpose, don't include it in your project     -->
	    <link href="/css/demo.css" rel="stylesheet" />
	    <script src="/js/jquery.countdown360.js" type="text/javascript" charset="utf-8"></script>
    	    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
            <link href='http://fonts.googleapis.com/css?family=Roboto:400,700,300' rel='stylesheet' type='text/css'>
            <link href="/css/pe-icon-7-stroke.css" rel="stylesheet" />

<script>
$(function () {
            $("body").on('click keypress', function () {
                ResetThisSession();
            });
        });


    var timeInSecondsAfterSessionOut =300; // change this to change session time out (in seconds).
        var secondTick = 0;

        function ResetThisSession() {
            secondTick = 0;
        }

        function StartThisSessionTimer() {
            secondTick++;
            var timeLeft = ((timeInSecondsAfterSessionOut - secondTick) / 60).toFixed(0); // in minutes
        timeLeft = timeInSecondsAfterSessionOut - secondTick; // override, we have 30 secs only

            $("#spanTimeLeft").html(timeLeft);

                 if(timeLeft==5){
                      //  window.alert("Session will expire if you are inactive")
                $('#AutoSignoutmodal').modal('show');
                        }

             if (secondTick > timeInSecondsAfterSessionOut) {
               clearTimeout(tick);
                window.location = "/logoutModule/logout/logout";
                return;
            }
            tick = setTimeout("StartThisSessionTimer()", 1000);
        }

        StartThisSessionTimer();
</script>		<script>
		function changeHashOnLoad()
		{
		window.location.href += "#";
		setTimeout("changeHashAgain()", "50");
		}

		function changeHashAgain()
		{
		window.location.href += "1";
		}

		var storedHash = window.location.hash;
		window.setInterval(function ()
		{
		if (window.location.hash != storedHash)
		{
		window.location.hash = storedHash;
		}
		}, 50);
		</script>

    	     <style>
			.navbar .navbar-reverse 
			{
  				display: inline-block;
  				float: none;
  				vertical-align: top;
			}

			.navbar .navbar-collapse 
			{
  				text-align: center;
			}		

                        table, tr, td
                        {
                            border: 0px;
                            padding: 2px;
                        }

                        table
                        {
                                border-spacing: 0px;
                        }


input[type="submit"] {
    background-color: #008080 !important;
}

input[type="button"] {
background-color: #2e2b2b !important;
border-color: var(--linkTxt-color) !important;
}


			.dropdown {
		  position: relative;
		  top:50%;
		  transform: translateY(-50%);
		}

		a {
		  color: black;
		}

		.dropdown dd,
		.dropdown dt {
		  margin: 0px;
		  padding: 0px;
		}

		.dropdown ul {
		  margin: -1px 0 0 0;
		}

		.dropdown dd {
		  position: relative;
		}

		.dropdown a,
		.dropdown a:visited {
		  color:#626264;
		  text-decoration: none;
		  outline: none;
		  font-size: 18px;
		}

		.dropdown dt a {
		  background-color: #F4F4F4;
		  display: block;
		  border-radius:4px;
		  padding: 8px 20px 5px 10px;
		  min-height: 35px;
		  line-height: 24px;
		  overflow: hidden;
		  border: 0;
		  width: 272px;
		}
                .dropd dt a {
                  background-color: #fff;
                  display: block;
                  border-radius:4px;
                  padding: 8px 20px 5px 10px;
                  min-height: 35px;
                  line-height: 24px;
                  overflow: hidden;
                  border: 0;
                  width: 572px;
                }

		.dropdown dt a span,
		.multiSel span {
		  cursor: pointer;
		  display: inline-block;
		  padding: 0 3px 2px 0;
		}

		.dropdown dd ul {
		  background-color: #fff;
		  border: 0;
		  color: black;
		  display: none;
		  left: 0px;
		  padding: 2px 15px 2px 5px;
		  position: absolute;
		  top: 2px;
		  width: 280px;
		  list-style: none;
		  height: 100px;
		  overflow: auto;
		}

		.dropdown span.value {
		  display: none;
		}

		.dropdown dd ul li a {
		  padding: 5px;
		  display: block;
		}

		.dropdown dd ul li a:hover {
		  background-color: #808080;
		}
                        .picker__select--year {
                            width: 24.5%;
                            height: 30%;
                        }
                        .picker__select--month {
                            width: 35%;
                            height: 30%;
                        }

                        hr {
                                border: none;
                                height: 1px;
                                color: #333;
                                background-color: #333;
                           }



			     </style>
		     
	<script type="text/javascript">

                   $(window).load(function()
                   {
                          $('#paDate').pickadate(
                          {
                              selectMonths: true,
                              selectYears: 100,
                              format: 'yyyy-mm-dd',
                              formatSubmit: 'yyyy-mm-dd',
                              closeOnSelect: true,
                              closeOnClear: true
                          });
                   });

                   $(document).ready(function()
                   {
                        $("#my-icon").click(function()
                        {
                                $( '#paDate' ).pickadate("open"),
                                event.stopPropagation(),
                                event.preventDefault()

                        });
                   });
                   $(window).load(function()
                   {
                          $('#peDate').pickadate(
                          {
                              selectMonths: true,
                              selectYears: 100,
                              format: 'yyyy-mm-dd',
                              formatSubmit: 'yyyy-mm-dd',
                              closeOnSelect: true,
                              closeOnClear: true
                          });
                   });

                   $(document).ready(function()
                   {
                        $("#my-icon1").click(function()
                        {
                                $( '#peDate' ).pickadate("open"),
                                event.stopPropagation(),
                                event.preventDefault()
                        });
                   });

			function formValidations()
			{
       var pstartdate = document.getElementById("startdateflg").value;
       var penddate = document.getElementById("enddateflg").value;
       var sellist = document.getElementById("Alreadyallocated").value;

      var checkboxes = document.getElementsByName('selected[]');
			var vals = "";
      

          
			for (var i=0, n=checkboxes.length;i<n;i++) 
			{
			    if (checkboxes[i].checked) 
			    {

				      vals += checkboxes[i].value+"-";
			    }
			}
      
      var selperalloc = document.getElementById("peralloc").value;
      for(j=0;j<<%=empname_count%>;j++)
      {
        var eval = document.getElementById("alloc"+j).value;
        var eid=eval.substr(0, eval.indexOf('-'));
        var match = vals.match(eid);
            
          if (match != null)
          {

            var remalloc = eval.substring(eval.indexOf("-") + 1);
            var rem = parseInt(remalloc);
            var sel = parseInt(selperalloc);

            if((rem != 0) && (rem<sel))
            {
               rem = 100 - rem;
               alert("Employee " + eid + " will be " + rem + "% Allocated, Since the employee is already allocated to some other project.");
             }

          }


      }

			if ( vals.length <= 0 )
			{
         			//alert("Please select Employees for allocation");
				demo.initChartist();
				$.notify({
				icon: 'fa fa-exclamation-circle',
				message: "Please select Employees for allocation"
				},{
				type: 'info',
				timer: 500
				});
         			return false;
			}			 
			
			document.getElementById("empselected").value=vals;

      			var pmgr =document.getElementById("projMgr").value;
      			var match = vals.match(pmgr);

            
      			if (match != null)
      			{
        			//alert("Selected Employee cannot be same as Project Manager");
				 demo.initChartist();
				 $.notify({
 				 icon: 'fa fa-exclamation-circle',
 				 message: "Selected Employee cannot be same as Project Reporting Manager"
 				 },{
 				 type: 'info',
 				 timer: 500
 				 });
        			return false;
      			}				

			if(sellist === "")
			{
  				var abc = "";
			}
			else
			{

     				var ematch = vals.match(sellist);
          
      			if (ematch != null)
      			{
        		var txt = "employee id : " + sellist + " Already Allocated to the selected project id, Kindly de-select this employee or choose another employee.";
        		alert(txt);
        		return false;
      			}
		   }		
    		   var padate = document.getElementById("paDate").value;			
		   if ( padate === "") 
    		   {
        		//alert("Enter a Valid Project Allocation Date");
			document.getElementById("paDate").focus();
			demo.initChartist();
			$.notify({
			icon: 'fa fa-exclamation-circle',
			message: "Enter a Valid Project Allocation Date"
			},{
			type: 'danger',
			timer: 500
			});	

                	return false;
    		   }

		   var pedate = document.getElementById("peDate").value;			
		   if ( pedate === "")
            	   { 
                	//alert("Enter a Valid Project End Date");
			 demo.initChartist();
 			 $.notify({
 			 icon: 'fa fa-exclamation-circle',
 			 message: "Enter a Valid Project End Date"
 			 },{
 			 type: 'danger',
 			 timer: 500
 			});

                	document.getElementById("peDate").focus();
                	return false;
            	   }



            		var future = moment(pedate);
            		var start = moment(padate);
            		var differ = future.diff(start, 'days');  
          if (differ < 0)
          {
         //   alert("Allocation Start date cannot be greater/Equal than Allocation End Date");
		 demo.initChartist();
 		 $.notify({
 		 icon: 'fa fa-exclamation-circle',
 		 message: "Allocation Start date cannot be greater/Equal than Allocation End Date"
 	 	 },{
 		 type: 'danger',
 		 timer: 500
		});
            	return false;
          }
                 
           	var d1 = moment(padate);
            	var d2 = moment(pstartdate);
            	var differ = d1.diff(d2, 'days');  
          if (differ < 0)
          {
            alert("Allocation Start date cannot be less than Project Start Date : "+pstartdate);
            document.getElementById("paDate").focus();
            return false;

          }

           d1 = moment(penddate);
           d2 = moment(pedate);
            var differ = d1.diff(d2, 'days');  
          if (differ < 0)
          {
           	alert("Allocation End date cannot be greater than Project End Date : "+penddate);
         	document.getElementById("peDate").focus();
            	return false;

          }



        var noofdays = getDays(padate,pedate);

        document.getElementById("noofworkingdays").value=noofdays;
        var noofmonths =monthDiff(padate,pedate);

        document.getElementById("noofworkingmonths").value=noofmonths;

        var lastdaydiff = lastday(padate);
        document.getElementById("firstmonthdays").value=lastdaydiff;
        
        var firstdaydiff = firstday(pedate);
        document.getElementById("lastmonthdays").value=firstdaydiff;
        
        var firstnoofdays = daysInMonth(padate);

        document.getElementById("firstnoofdays").value=firstnoofdays;
        var lastnoofdays = daysInMonth(pedate);
        document.getElementById("lastnoofdays").value=lastnoofdays;
		
	var projectCrncy = document.getElementById("projCurr").value;
	var salaryCrncy = document.getElementById("salCurr").value;
	if(projectCrncy != salaryCrncy)
	{
		var converRate=document.getElementById("convRate").value
		if(converRate=== "")
		{
		 demo.initChartist();
		 $.notify({
		 icon: 'fa fa-exclamation-circle',
		 message: "Conversion Rate cannot be null"
		 },{
		 type: 'danger',
		 timer: 500
		});
		document.getElementById("convRate").focus();
		return false;
				
			}
	}
 	 return true; 
	}

      function lastday(padate)
      {
        var lastDay;
        var d1=new Date(padate);
        var lastDay = new Date(d1.getFullYear(), d1.getMonth() + 1, 0);

        var future = moment(lastDay);
        var start = moment(d1);
        var differ = future.diff(start, 'days');
        differ = differ + 1;
        return differ;

      }
      function firstday(pedate)
      {
        var firstDay;
        var d1=new Date(pedate);
        var firstDay = new Date(d1.getFullYear(), d1.getMonth(), 1);
        var future = moment(d1);
        var start = moment(firstDay);
        var differ = future.diff(start, 'days');
        differ = differ + 1;
        return differ;
        
      }

      function monthDiff(padate, pedate)
       {
          var months;
          var d1=new Date(padate);
          var d2=new Date(pedate);
          var date1 = moment(d1);
          var date2 = moment(d2);
          months = date2.diff(date1, 'months');
          months = months - 1;
          return months;
      }

      function daysInMonth(anyDate)
      {

        var anyDateInMonth = new Date(anyDate);
        return new Date(anyDateInMonth.getYear(),anyDateInMonth.getMonth()+1,0).getDate();
      }

      function getDays(padate, pedate) 
      {
          var d1=new Date(padate);
          var d2=new Date(pedate);
          var future = moment(d2);
          var start = moment(d1);
          var differ = future.diff(start, 'days');  
          return differ;
      }

		function resetform()
		{

			document.getElementById("myForm").reset();
		}


function startDate()
{
  var projectid = document.getElementById("projid").value;
  if (projectid === "")
  {
    //    alert("Please select Project Id");
	  demo.initChartist();
          $.notify({
          icon: 'fa fa-exclamation-circle',
          message: "Please select Project Id"
          },{
          type: 'danger',
          timer: 500
          });

        document.getElementById("paDate").value="";
        document.getElementById("projid").focus();
        return false;               
  }
  else
  {
                   $.ajax({
                        url:'/projectModule/projectDetails/startdateval?pId='+projectid,method:'get',success:function(resp,status){
                        $('#startdateflg').val(resp.key);
                        }
                        });
  }

  return true;
}

function endDate()
{
  var projectid = document.getElementById("projid").value;
  if (projectid === "")
  {
       // alert("Please select Project Id");
	   demo.initChartist();
   	   $.notify({
   	   icon: 'fa fa-exclamation-circle',
   	   message: "Please select Project Id"
   	   },{
   	   type: 'danger',
   	   timer: 500
   	  });
        document.getElementById("peDate").value="";
        document.getElementById("projid").focus();
        return false;               
  }
  else
  {
                   $.ajax({
                        url:'/projectModule/projectDetails/enddateval?pId='+ projectid,method:'get',success:function(resp,status){
                        $('#enddateflg').val(resp.key);
                        }
                        });
  }

  return true;
}


function alreadyAllocated()
{
  var projectid = document.getElementById("projid").value;
  var checkboxes = document.getElementsByName('selected[]');
      var vals = "";
      for (var i=0, n=checkboxes.length;i<n;i++) 
      {
          if (checkboxes[i].checked) 
          {
        vals += checkboxes[i].value+"-";
          }
      }
      if ( vals.length <= 0 )
      {
        // alert("Please select Employees for allocation");
	 demo.initChartist();
   	 $.notify({
   	 icon: 'fa fa-exclamation-circle',
   	 message: "Please select Employees for allocation"
   	 },{
   	 type: 'danger',
   	 timer: 500
  	 });	
         return false;
      } 
/*		$.ajax({
                        url:'/projectModule/projectDetails/currMatch?pId='+ projectid +'&selected='+vals,method:'get',success:function(resp,status){
                        }
                        });*/
	if(projectid != "")
	{

                   $.ajax({
                        url:'/projectModule/projectDetails/alreadyallocated?pId='+ projectid +'&selected='+vals,method:'get',success:function(resp,status){
                        $('#Alreadyallocated').val(resp.key);
			if(status=="success")
			{	
				var i= 0;
				$('#salCnt').val(resp.key1);
				var salCnt = document.getElementById("salCnt").value;
				$('#salCurr').val(resp.key2);
				var salCurr = document.getElementById("salCurr").value;
				$('#projCurr').val(resp.key3);
				var projCurr = document.getElementById("projCurr").value;
				if(salCnt > 1)
				{
					$.notify({
					 icon: 'fa fa-exclamation-circle',
					 message: "Employees with multiple salary currencies are set for allocation.Kindly allocate seperately"
					 },{
					 type: 'danger',
					 timer: 500
					 });
					document.getElementById("projid").value="";
				}
				else
				{
					var dispFlg=0;
					for(i=0;i<=salCnt;i++)
					{
						if(projCurr != salCurr)
						{
							dispFlg=1;
							addFields('convRate_div');
							document.getElementById("convRate_div").style.display='block';	
							var converRate=document.getElementById("convRate").value
							if(converRate=== "")
							{
								  demo.initChartist();
								  $.notify({
								  icon: 'fa fa-exclamation-circle',
								  message: "Enter a Valid conversion Rate"
								  },{
								  type: 'danger',
								  timer: 500
								 });

								 document.getElementById("convRate").focus();
								 return false;
							}
						}
						else
						{
							document.getElementById("convRate_div").style.display='none';
						}
					}
					if(dispFlg ==0)
					{
						document.getElementById("convRate_div").style.display='none';		
					}
				}
			}
			
                        }
                        });
		}
		else
		{
			document.getElementById("convRate_div").style.display='none';
		}
  
  return true;
}

function showConvRate()
{
	alert(document.getElementById("salCurr").value);
}

/*function currCheck()
{
	alert("in");
	var checkboxes = document.getElementsByName('selected[]');
	for (var i=0, n=checkboxes.length;i<n;i++) 
	{
		if (checkboxes[i].checked) 
		{
			vals += checkboxes[i].value+"-";
		}
	}
	alert(vals.length);
	if ( vals.length > 0 )
	{
		$.ajax({
                        url:'/projectModule/projectDetails/currMatch?&selected='+vals,method:'get',success:function(resp,status){
                        $('#currFlg').val(resp.key);
                        }
                        });
	}
return true;
}*/

function addFields(divName){
	var counter = 1;
var limit = salCnt;
	if(counter <= limit)
{
	var newdiv = document.createElement('convRate_div');
	newdiv.innerHTML = "Entry " + (counter + 1) + " <br><input type='text' name='convRate'>";
	document.getElementById(divName).appendChild(newdiv);
	counter++;
}
        }
    </script>

</head>
<body onload="changeHashOnLoad();">
<div class="wrapper">
    <div class="sidebar">
        <div class="sidebar-wrapper" style ="background-color: #008080">
        <% include ../common/logo %>
            <ul class="nav">
                <li>
                    <a href="/admin-dashboard/adminDashboard/admindashboard">
                         <i class="material-icons">dashboard</i>
                        <p>Dashboard</p>
                    </a>
                </li>
                <li>
                    <% if(emp_access == "A1"){%>
                    <a href="/employeeModule/employeeDetails/employeeDetails">
                        <i class="material-icons">person</i>
                        <p>Employee Details</p>
                    </a>
                    <%}else{%>
                    <a href="/employeeModule/employeeDetails/employeeAddpersonal">
                        <i class="material-icons">person</i>
                        <p>Employee Details</p>
                    </a>
                    <%}%>
                </li>

                <li class="active">
                <% if(emp_access == "L1" || emp_access == "L2" ){%>
                    <a href="/projectModule/projectDetails/customercreation">
                        <i class="material-icons">pie_chart</i>
                        <p>Project Module</p>
                    </a>
                <%}%>
                </li>
                <li>
                   <a href="/appraisalModule/viewAppraisal/viewAppraisal">
                        <i class="material-icons">thumbs_up_down</i>
                        <p>Appraisal Module</p>
                    </a>
                </li>
                <li>
                    <a href="/cmsModule/cms/cms">
                        <i class="material-icons">file_upload</i>
                        <p>E-Docket</p>
                    </a>
                </li>

                <% if(emp_access == "N1" ){%>
                <li>
                    <a href="/assetModule/assetDetails/assetDetails">
                        <i class="material-icons">phonelink</i>
                        <p>Asset Management</p>
                    </a>
                </li>
                <%}%>

                <li >
                    <a href="/requestModule/applyLeave/applyLeave">
                        <i class="material-icons">event</i>
                        <p>Leave Requests</p>
                    </a>
                </li>
                <% if(emp_access == "A1" ){%>
                <li>
                    <a href="/holidaysModule/holidays/viewHolidays">
                        <i class="material-icons">date_range</i>
                        <p>Holiday Management</p>
                    </a>
                </li>
                <%}%>
                <li>
                   <% if(emp_access != 'A1'){ %>
                    <a href="/travelModule/travel/travel">
                        <i class="material-icons">flight</i>
                        <p>Travel Requests</p>
                    </a>
                  <%}else{%>
                    <a href="/travelModule/travel/travelHrReqQueue">
                        <i class="material-icons">flight</i>
                        <p>Travel Requests</p>
                    </a>
                   <% } %>
                </li>
                <% if( emp_access== 'A1'){ %>
                <li>
                    <a href="/invoiceModule/invoiceDetails/chooseinvoiceDetails">
                        <i class="material-icons">storage</i>
                        <p>Invoice Management</p>
                    </a>
                </li>
                <% } %>
                <li>
                   <% if(emp_access != 'A1'){ %>
                    <a href="/reimbursementModule/initiateRem/initiateRem">
                        <i class="material-icons">receipt</i>
                        <p>Claims</p>
                    </a>
                   <%}else{%>
                    <a href="/reimbursementModule/initiateRem/reimburseHrReqQueue">
                        <i class="material-icons">receipt</i>
                        <p>Claims</p>
                    </a>
                   <%}%>
               </li>
            </ul>
        </div>
    </div>


    <div class="main-panel">

        <div class="content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col">
                        <div class="card">
                            <div class="header">
                                <!--<h3 class="title">Edit Profile    <i class="material-icons right">mode_edit</i></h3>-->
				<!--<hr/>-->
				<nav class="navbar navbar-inverse">
  				<ul class="nav navbar-nav" data-color="#FFFFFF">
                                <li><a href="/projectModule/projectDetails/customercreation">Customer Details</a></li>
                                <li><a href="/projectModule/projectDetails/customermodification">Customer Details Modification</a></li>
                                <li><a href="/projectModule/projectDetails/projectDetails">Add Project Details</a></li>
                                <li><a href="/projectModule/projectDetails/projectDocuments">Project Documents</a></li>
                                <li><a href="/projectModule/projectDetails/projectDocumentsView">Project Documents View</a></li>
                                <li><a href="/projectModule/projectDetails/projectModification">Modify Project Details</a></li>
                              	<li><a href="/projectModule/projectDetails/projectCopy">Copy Project Details</a></li>
                              	<li><a href="/projectModule/projectDetails/milestoneMarking">Milestone Marking</a></li>
                              	<li><a href="/projectModule/projectDetails/projectAllocation"><span style="color:#ff9933">Project Allocation</span></a></li>
                                <li><a href="/projectModule/projectDetails/viewAllocation">View Project Allocation</a></li>
                                <li><a href="/projectModule/projectDetails/viewEmpallocation">View Employee Allocation</a></li>
                                <li><a href="/projectModule/projectDetails/ModifydelAllocation">Modify Allocation</a></li>
                                <li><a href="/projectModule/projectDetails/projDealloc">Project De-Allocation</a></li>
				<li><a href="/projectModule/childproject/childproject">Add Child Project</a></li>
				<li><a href="/projectModule/productdetails/productdetails">Add Product Details</a></li>
				<li><a href="/projectModule/projectDetails/recallmilestonemrak">Recall Milestone</a></li>
				<li><a href="/projectModule/projectFAQDetails/projectFAQDetails">FAQ</a></li>
  				</ul>
				</nav>

				<br>
                            </div>
                            <div class="content">
                                <form name="myForm" action="/projectModule/projectDetails/projectAllocation" method="post" onsubmit="return formValidations()">
				<hr/>
				<h4 class="title">Project Allocation Details<i class="material-icons right">assignment_ind</i></h4>
				<hr/>
                                <div class="row">
                                <div class="col-md-5">
                                <div class="form-group">
				<br>
				<dl class="dropdown" >
				    <dt>
				    <a href="#">Select Employees
				<span class="fa fa-angle-down pull-right"></span>
				    </a>
				    </dt>

				    <dd>
          <input type="hidden" id="empselected" name="empselected">
          <input type="hidden" id="noofworkingdays" name="noofworkingdays">
          <input type="hidden" id="noofworkingmonths" name="noofworkingmonths">
          <input type="hidden" id="firstmonthdays" name="firstmonthdays">
          <input type="hidden" id="lastmonthdays" name="lastmonthdays">
          <input type="hidden" id="firstnoofdays" name="firstnoofdays">
          <input type="hidden" id="lastnoofdays" name="lastnoofdays">
          <input type="hidden" id="startdateflg" name="startdateflg">
          <input type="hidden" id="enddateflg" name="enddateflg">
          <input type="hidden" id="Alreadyallocated" name="Alreadyallocated">
          <input type="hidden" id="projCurr" name="projCurr">
          <input type="hidden" id="salCurr" name="salCurr">
          <input type="hidden" id="salCnt" name="salCnt">
           <input type="hidden" id="empperalloc" name="empperalloc">
					<div class="mutliSelect" >
					    <ul>

                                                <% for (i = 0; i < empname_count; i++)  {%>
                                                <input type="hidden" id="alloc<%=i%>" name="alloc<%=i%>" value="<%= empname[i].emp_id %>-<%= empname[i].alloc %>">

                                                <li>
                                                    <input style="text-transform: uppercase;" id="empId" type="checkbox" name="selected[]" onchange="alreadyAllocated()"  value="<%= empname[i].emp_id %>"  />&nbsp;<%=empname[i].emp_name %></li>
                                                      <% }; %>
					    </ul>
					</div>
				    </dd>
				</dl>
			</div>
			</div>
                        <div class="col-md-5">
                        <div class="form-group">
                               <dl class="dropd">
                                    <dt>
                                    <a>
                                      <p class="multiSel"></p>
                                    </a>
                                    </dt>
                                </dl>							
			</div>
			</div>
			</div>
                        <br>
                        <br>
                        <br>
				<hr/>
                                    <div class="row">
                                        <div class="col-md-5">
                                            <div class="form-group">
                                                <label for="projid">Project Id   <span style="color:red;font-size: 10pt">*</span></label>
                                                 <select class="form-control" style ="width:348px" id="projid" name="projid" required style="width:259px;height:40px;text-transform:uppercase" onblur="return alreadyAllocated()">
                                                        <option value="" selected disabled>Project Id</option>

                                                                  <% for (i = 0; i < projid_count; i++)  {%>
                                                                  <option value="<%= projectname[i].project_id %>" style="text-transform: uppercase"><span style="color:#4E4EC3"><%= projectname[i].project_id %></span>&nbsp;-&nbsp;<%=projectname[i].customer_name %></option>
                                                                              <% }; %>

                                                                </select>

                                            </div>
                                        </div>
                                        <div class="col-md-5">
                                            <div class="form-group">
                                                <label for="ProjMgr">Project Reporting Manager  <span style="color:red;font-size: 10pt">*</span></label>
                                                 <select class="form-control" style ="width:348px" id="projMgr" name="projMgr" required style="width:259px;height:40px;text-transform:uppercase">
                                                        <option value="" selected disabled>Reporting Manager</option>

                                                                  <% for (i = 0; i < manid_count; i++)  {%>
                                                                  <option value="<%= manager[i].emp_id %>" style="text-transform: uppercase"><%= manager[i].emp_id %>-<%=manname[i].emp_name %></option>
                                                                              <% }; %>

                                                                </select>

                                            </div>
                                        </div>

                                      </div>

                                    <div class="row">                                                            
					
				                            	<div class="col-md-5">
                                            <div class="form-group">
                                                <label for="peralloc">Percentage Allocation  <span style="color:red;font-size: 10pt">*</span></label>
                                                <select class="form-control" id="peralloc" name="peralloc" required style ="width:348px" />
                                                        <option value="10">10%</option>
                                                        <option value="20">20%</option>
                                                        <option value="30">30%</option>
                                                        <option value="40">40%</option>
                                                        <option value="50">50%</option>
                                                        <option value="60">60%</option>
                                                        <option value="70">70%</option>
                                                        <option value="80">80%</option>
                                                        <option value="90">90%</option>
                                                        <option value="100" selected>100%</option>
                                                </select>

                                            </div>

					
                                        </div>
                                        <div class="col-md-5">
                                        <label for="emploctype">Employee location type  <span style="color:red;font-size: 10pt">*</span></label>&nbsp;<br>
                                        <input type="radio" name="emploctype" value="OFFSHORE" checked="checked" required/> OFFSHORE&nbsp;&nbsp;
                                        <input type="radio" name="emploctype" value="ONSITE"> ONSITE
                                        </div>
                                        </div>
                                    
				<div class="row">
                                        <div class="col-md-5">
                                            <div class="form-group">

                                                <div class="datepicker">
                                                    <table>
                                                        <tr><label style="color:#404040;">Allocation Start Date (YYYY-MM-DD) <span style="color:red;font-size: 10pt">*</span></label>
                                                        <td><input type="text" style ="width:348px" id="paDate" name="paDate" required class="form-control" placeholder="Allocation Date" onchange="return startDate()"></td>
                                                        <td><span id="my-icon" class="glyphicon glyphicon-calendar"></span></td>
                                                        </tr>
                                                    </table>
                                                </div>

                                            </div>
                                        </div>
                                    
                                        <div class="col-md-5">
                                            <div class="form-group">

                                                <div class="datepicker">
                                                    <table>
                                                        <tr><label style="color:#404040;" for="peDate">Allocation End Date (YYYY-MM-DD) <span style="color:red;font-size: 10pt">*</span></label>
                                                        <td><input type="text" style ="width:348px" id="peDate" name="peDate" required class="form-control" placeholder="End Date" onchange="return endDate()"></td>
                                                        <td><span id="my-icon1" class="glyphicon glyphicon-calendar"></span></td>
                                                        </tr>
                                                    </table>
                                                </div>

                                            </div>
                                        </div>
                                </div>
				
				<div class="row">
                                        <div class="col-md-5">
					<label for="empbill">Employee Billable<span style="color:red;font-size: 10pt">*</span></label>&nbsp;<br>
                                        <input type="radio" name="empbill" value="Y" checked="checked" required/> YES&nbsp;&nbsp;
                                        <input type="radio" name="empbill" value="N"> NO
					
                                        </div>
					<div class="form-group" id="convRate_div" style="display: none;">
						 <label for="convRate" style="color:#404040;">conversion Rate</label>
						 <input type="text" style ="width:348px" id="convRate" maxlength="4" name="convRate"  class="form-control" placeholder="conversion Rate">
					 </div>                                       
					
                                 </div>
						 
			<br>	
			<br>	
			<!--			<input type="hidden"  id="homecur" name="homecur" value="<%=home_cur%>" >-->
                                    <table>
                                       <tr>
                                       <br>
                                                <td><input type="submit" name="test" id="test" style="padding:1px 16px;height:40px;width:110px" class="btn btn-info btn-fill" style="float: left;" value="Allocate"></td>
                                                <td><input type="button" style="padding:1px 16px;height:40px;width:100px" class="btn btn-info btn-fill" style="float: center;" value="Clear" onclick="return resetform()"></td>
                                      </tr>
                                    </table>

                                    <div class="clearfix"></div>
                                </form>
                            </div>
                        </div>
                    </div>
                                  </div>
            </div>
        </div>


      <!--  <footer class="footer" style="background-color: transparent;border-color: transparent">
            <div class="container-fluid">
                <p class="copyright pull-right" style="color:white;">
                    &copy; 2017 <a href="http://www.nurture.co.in" target="_blank"><span style="color: orange">Nurture Software Solutions Pvt Ltd</span></a>
                </p>
            </div>
        </footer>
	-->
	 <% include ../common/footer %>
    </div>
</div>


</body>

    <!--   Core JS Files   -->
    <script src="assets/js/jquery-1.10.2.js" type="text/javascript"></script>
    <script src="/js/bootstrap.min.js" type="text/javascript"></script>

    <!--  Checkbox, Radio & Switch Plugins -->
    <script src="/js/bootstrap-checkbox-radio-switch.js"></script>

    <!--  Charts Plugin -->
    <script src="/js/chartist.min.js"></script>

    <!--  Notifications Plugin    -->
    <script src="/js/bootstrap-notify.js"></script>

    <!--  Google Maps Plugin    -->
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>

    <!-- Light Bootstrap Table Core javascript and methods for Demo purpose -->
    <script src="/js/light-bootstrap-dashboard.js"></script>

    <!-- Light Bootstrap Table DEMO methods, don't include it in your project! -->
    <script src="/js/demo.js"></script>
      <% if(success!="") { %>

        <script type="text/javascript">
        $(document).ready(function(){

                demo.initChartist();

                $.notify({
                icon: 'fa fa-exclamation-circle',
                message:"<b><%= success %></b>"

            },{
                type: 'info',
                timer: 500
            });

        });
        </script>
        <%}%>

         <% if(error!="") { %>

        <script type="text/javascript">
        $(document).ready(function(){

                demo.initChartist();

                $.notify({
                icon: 'fa fa-exclamation-circle',
                message:"<b><%= error %></b>"

            },{
                type: 'danger',
                timer: 500
            });

        });
        </script>
<%}%>

<script type="text/javascript">
$(".dropdown dt a").on('click', function() {
  $(".dropdown dd ul").slideToggle('fast');
});

$(".dropdown dd ul li a").on('click', function() {
  $(".dropdown dd ul").hide();
});

function getSelectedValue(id) {
  return $("#" + id).find("dt a span.value").html();
}

$(document).bind('click', function(e) {
  var $clicked = $(e.target);
  if (!$clicked.parents().hasClass("dropdown")) $(".dropdown dd ul").hide();
});

$('.mutliSelect input[type="checkbox"]').on('click', function() {

  var title = $(this).closest('.mutliSelect').find('input[type="checkbox"]').val(),
    title = $(this).val() + ",";

  if ($(this).is(':checked')) {
    var html = '<span title="' + title + '">' + title + '</span>';
    $('.multiSel').append(html);
    $(".hida").hide();
  } else {
    $('span[title="' + title + '"]').remove();
    var ret = $(".hida");
    $('.dropdown dt a').append(ret);

  }
});
</script>
</html>


