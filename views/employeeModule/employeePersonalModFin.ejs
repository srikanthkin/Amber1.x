<!doctype html>
<html lang="en">
<head>
           <title>Employee Details</title>
           <% include ../common/header %>
           <% include ../common/scripts %>
           <% include ../common/styles %>

        <style>

                .card .header2row
                {
                        padding: 15px 15px 0;
                }
			
		.navbar .navbar-reverse 
		{
			display: inline-block;
			float: none;
			vertical-align: top;
		}

		.navbar .navbar-collapse 
		{
			text-align: center;
		}			

		table, tr, td 
		{
		    border: 0px;
		    padding: 2px;
		}

		table 
		{
			border-spacing: 0px;
		}

		hr 
		{
			border: none;
			height: 1px;
			color: #333; 
			background-color: #333; 
		}

		ul.topnav
		{
				list-style-type: none;
				margin: 0;
				padding: 0;
				overflow: hidden;
				background-color: #333;
		}

		ul.topnav li
		{
			float: left;
		}

		ul.topnav li a
		{
			display: block;
			color: white;
			text-align: center;
			padding: 14px 16px;
			text-decoration: none;
		}

		ul.topnav li a:hover:not(.active)
		{
			background-color: #111;
		}

		ul.topnav li a.active
		{
			background-color: #4CAF50;
		}

		ul.topnav li.right
		{
			float: right;
		}

		@media screen and (max-width: 600px)
		{
			ul.topnav li.right,
			ul.topnav li {float: none;}
		}

		.picker__select--year
		{
		    width: 24.5%;
		    height: 30%;
		}

		.picker__select--month
		{
		    width: 35%;
		    height: 30%;
		}


    	     </style>

             <script>

			function changeHashOnLoad()
			{
			       window.location.href += "#";
			       setTimeout("changeHashAgain()", "50");
			}

			function changeHashAgain()
			{
			       window.location.href += "1";
			}

			var storedHash = window.location.hash;
			window.setInterval(function ()
			{
			    if (window.location.hash != storedHash)
			    {
			       window.location.hash = storedHash;
			    }
			}, 50);

             </script>

             <script>

                $(document).ready(function()
                {
			$('#empName').change(function()
			{
				$(this).val($(this).val().toUpperCase());
			});
                });


                $(document).ready(function()
                {
                        $('#nameinBank').change(function()
                        {
                                $(this).val($(this).val().toUpperCase());
                        });
                });

                $(document).ready(function()
                {
                        $('#bankName').change(function()
                        {
                                $(this).val($(this).val().toUpperCase());
                        });
                });

                $(document).ready(function()
                {
                        $('#branchName').change(function()
                        {
                                $(this).val($(this).val().toUpperCase());
                        });
                });

                $(document).ready(function()
                {
                        $('#ifscCode').change(function()
                        {
                                $(this).val($(this).val().toUpperCase());
                        });
                });

                $(document).ready(function()
                {
                        document.getElementById("nameinBank").setAttribute("readonly", true);
                        document.getElementById("bankName").setAttribute("readonly", true);
                        document.getElementById("branchName").setAttribute("readonly", true);
                        document.getElementById("acctNum").setAttribute("readonly", true);
                        document.getElementById("ifscCode").setAttribute("readonly", true);
                        document.getElementById("Modify").setAttribute("disabled", true);
                        document.getElementById("clrbtn").setAttribute("disabled", true);
		});

		</script>

		<script type="text/javascript">

                        function formValidations()
                        {
				
                                var empid = document.getElementById("empid").value;
                                if(empid != "")
                                {
					var empid = document.getElementById("empid").value;
					if(empid.length < 4)
					{
                                                document.getElementById("empid").focus();
                                                demo.initChartist();
                                                $.notify({
                                                icon: 'fa fa-exclamation-circle',
                                                message: "Please enter a valid Employee Id"
                                                },{
                                                type: 'info',
                                                timer: 500
                                                });
                                                return false;
					}

                                        var validsen = /^\d{1,4}?$/;
                                        if (validsen.test(empid)==false)
                                        {
                                                document.getElementById("empid").focus();
                                                demo.initChartist();
                                                $.notify({
                                                icon: 'fa fa-exclamation-circle',
                                                message: "Please enter a valid Employee Id"
                                                },{
                                                type: 'info',
                                                timer: 500
                                                });
                                                return false;
                                        }

                                }
                                else
                                {
                                                document.getElementById("empid").focus();
                                                demo.initChartist();
                                                $.notify({
                                                icon: 'fa fa-exclamation-circle',
                                                message: "Please enter your Employee Id"
                                                },{
                                                type: 'info',
                                                timer: 500
                                                });
                                                return false;
                                }

                                var empName = document.getElementById("empName").value;
                                if(empName == "")
                                {
                                                document.getElementById("empName").focus();
                                                demo.initChartist();
                                                $.notify({
                                                icon: 'fa fa-exclamation-circle',
                                                message: "Please enter your Employee Name"
                                                },{
                                                type: 'info',
                                                timer: 500
                                                });
                                                return false;
                                }
                                else
                                {
                                        if (!/^[a-zA-Z\s]+$/.test(document.getElementById("empName").value))
                                        {
                                                document.getElementById("empName").focus();
                                                demo.initChartist();
                                                $.notify({
                                                icon: 'fa fa-exclamation-circle',
                                                message: "Invalid , Employee Name should contain only letters"
                                                },{
                                                type: 'info',
                                                timer: 500
                                                });
                                                return false;
                                        }

                                }

                                var nameinBank = document.getElementById("nameinBank").value;
                                if(nameinBank == "")
                                {
                                                document.getElementById("nameinBank").focus();
                                                demo.initChartist();
                                                $.notify({
                                                icon: 'fa fa-exclamation-circle',
                                                message: "Please enter the Employee's Name as per Enrolled in Bank"
                                                },{
                                                type: 'info',
                                                timer: 500
                                                });
                                                return false;
                                }
				else
				{
						if (!/^[a-zA-Z\s]+$/.test(document.getElementById("nameinBank").value))
						{
							document.getElementById("nameinBank").focus();
							demo.initChartist();
							$.notify({
							icon: 'fa fa-exclamation-circle',
							message: "Invalid , Employee's Name as per Enrolled in Bank Should Contain Only Alphabets"
							},{
							type: 'danger',
							timer: 500
							});
							return false;
						}
				}

                                var bankName = document.getElementById("bankName").value;
                                if(bankName == "")
                                {
                                                document.getElementById("bankName").focus();
                                                demo.initChartist();
                                                $.notify({
                                                icon: 'fa fa-exclamation-circle',
                                                message: "Please enter the Employee's Bank"
                                                },{
                                                type: 'info',
                                                timer: 500
                                                });
                                                return false;
                                }
                                else
                                {
                                                if (!/^[a-zA-Z\s]+$/.test(document.getElementById("bankName").value))
                                                {
                                                        document.getElementById("bankName").focus();
                                                        demo.initChartist();
                                                        $.notify({
                                                        icon: 'fa fa-exclamation-circle',
                                                        message: "Invalid , Employee's Name of the Bank Should Contain Only Alphabets"
                                                        },{
                                                        type: 'danger',
                                                        timer: 500
                                                        });
                                                        return false;
                                                }
                                }

                                var branchName = document.getElementById("branchName").value;
                                if(branchName == "")
                                {
                                                document.getElementById("branchName").focus();
                                                demo.initChartist();
                                                $.notify({
                                                icon: 'fa fa-exclamation-circle',
                                                message: "Please enter the Employee's Branch"
                                                },{
                                                type: 'info',
                                                timer: 500
                                                });
                                                return false;
                                }

                                var acctNum = document.getElementById("acctNum").value;
                                if(acctNum == "")
                                {
                                                document.getElementById("acctNum").focus();
                                                demo.initChartist();
                                                $.notify({
                                                icon: 'fa fa-exclamation-circle',
                                                message: "Please enter Employee's Account Number"
                                                },{
                                                type: 'info',
                                                timer: 500
                                                });
                                                return false;
                                }
                                else
                                {

					var acctNum = document.getElementById("acctNum").value;
                                        var validsen = /^\d{1,17}?$/;
                                        if (validsen.test(acctNum)==false)
                                        {
                                                document.getElementById("acctNum").focus();
                                                demo.initChartist();
                                                $.notify({
                                                icon: 'fa fa-exclamation-circle',
                                                message: "Invalid , Please enter a valid Account Number of the Employee"
                                                },{
                                                type: 'danger',
                                                timer: 500
                                                });
                                                return false;
                                        }

                                }

                                var ifscCode = document.getElementById("ifscCode").value;
                                if(ifscCode == "")
                                {
                                                document.getElementById("ifscCode").focus();
                                                demo.initChartist();
                                                $.notify({
                                                icon: 'fa fa-exclamation-circle',
                                                message: "Please enter the IFSC Code of Employee's Branch"
                                                },{
                                                type: 'info',
                                                timer: 500
                                                });
                                                return false;
                                }
				else
				{
                                        var regpan = /^[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]*$/;
                                        if(regpan.test(ifscCode))
                                        {
                                                document.getElementById("ifscCode").focus();
                                                demo.initChartist();
                                                $.notify({
                                                icon: 'fa fa-exclamation-circle',
                                                message: "Invalid , IFSC CODE should not contain any special characters"
                                                },{
                                                type: 'danger',
                                                timer: 500
                                                });
                                                return false;
                                        }
				}
                                return true;
                        }

			function resetform()
			{

				document.getElementById("myForm").reset();
			}

			function resetformSearch()
			{
				document.getElementById("empid").value="";
			}


        function getOtherDetails()
        {
                var empid = document.getElementById("empid").value;
                if(empid=="")
                {
			document.getElementById("nameinBank").setAttribute("readonly", true);
			document.getElementById("bankName").setAttribute("readonly", true);
			document.getElementById("branchName").setAttribute("readonly", true);
			document.getElementById("acctNum").setAttribute("readonly", true);
			document.getElementById("ifscCode").setAttribute("readonly", true);
			document.getElementById("Modify").setAttribute("disabled", true);
			document.getElementById("clrbtn").setAttribute("disabled", true);
                }
                else
                {
                        $(document).ready(function()
                        {
                                var empid  = document.getElementById("empid").value;
                                $.ajax({
                                url:'/employeeModule/employeeDetails/fetchDetfin?empid='+empid,method:'get',success:function(resp,status)
                                {
                                        $('#employee_id').val(resp.key);
                                        $('#empName').val(resp.key1);
                                        $('#nameinBank').val(resp.key2);
                                        $('#bankName').val(resp.key3);
                                        $('#branchName').val(resp.key4);
                                        $('#acctNum').val(resp.key5);
                                        $('#ifscCode').val(resp.key6);

					document.getElementById("nameinBank").removeAttribute("readonly", true);
					document.getElementById("bankName").removeAttribute("readonly", true);
					document.getElementById("branchName").removeAttribute("readonly", true);
					document.getElementById("acctNum").removeAttribute("readonly", true);
					document.getElementById("ifscCode").removeAttribute("readonly", true);
					document.getElementById("Modify").removeAttribute("disabled", true);
					document.getElementById("clrbtn").removeAttribute("disabled", true);

                                }
                                });
                        });
                }
                return true;
        }
		</script>



</head>
<body onload="changeHashOnLoad();">
<div class="wrapper">
    <div class="sidebar" style ="background-color: transparent;color: #006666">
        <div class="sidebar-wrapper">
        <% include ../common/logo %>
            <ul class="nav">
                <li>
                    <a href="/admin-dashboard/adminDashboard/admindashboard">
                        <i class="material-icons">dashboard</i>
                        <p>Dashboard</p>
                    </a>
                </li>
                <li class="active">
                    <% if(emp_access == "A1"){%>
                    <a href="/employeeModule/employeeDetails/employeeDetails">
                        <i class="material-icons">person</i>
                        <p>Employee Details</p>
                    </a>
                    <%}else{%>
                    <a href="/employeeModule/employeeDetails/employeeAddpersonal">
                        <i class="material-icons">person</i>
                        <p>Employee Details</p>
                    </a>
                    <%}%>
                </li>

                <% if(emp_access == "L1" || emp_access == "L2" ){%>
                <li>
                    <a href="/projectModule/projectDetails/customercreation">
                        <i class="material-icons">pie_chart</i>
                        <p>Project Module</p>
                    </a>
                </li>
                <%}%>

                <% if(emp_access == "F1"){%>
                <li>
                    <a href="/projectModule/projectDetails/projectDocumentsView">
                        <i class="material-icons">pie_chart</i>
                        <p>Project Module</p>
                    </a>
                </li>
                <%}%>

                <% if(emp_access != "F1"){%>
                <li>
                   <a href="/appraisalModule/viewAppraisal/viewAppraisal">
                        <i class="material-icons">thumbs_up_down</i>
                        <p>Appraisal Module</p>
                    </a>
                </li>
                <%}%>

                <li>
                    <a href="/cmsModule/cms/cms">
                        <i class="material-icons">file_upload</i>
                        <p>E-Docket</p>
                    </a>
                </li>

                <% if(emp_access == "N1"){%>
                <li>
                    <a href="/assetModule/assetDetails/assetDetails">
                        <i class="material-icons">phonelink</i>
                        <p>Asset Management</p>
                    </a>
                </li>
                <%}%>

                <li >
                    <a href="/requestModule/applyLeave/applyLeave">
                        <i class="material-icons">event</i>
                        <p>Leave Requests</p>
                    </a>
                </li>
                <% if(emp_access == "A1" || emp_access == "F1"){%>
                <li>
                    <a href="/holidaysModule/holidays/viewHolidays">
                        <i class="material-icons">date_range</i>
                        <p>Holiday Management</p>
                    </a>
                </li>
                <%}%>

                <% if(emp_access != 'A1'){ %>
                <li>
                   <% if(emp_access != "F1"){ %>
                    <a href="/travelModule/travel/travel">
                        <i class="material-icons">flight</i>
                        <p>Travel Requests</p>
                    </a>
                  <%}else{%>
                    <a href="/travelModule/travel/travelHrReqQueue">
                        <i class="material-icons">flight</i>
                        <p>Travel Requests</p>
                    </a>
                   <% } %>
                </li>
                <% } %>


                <% if( emp_access== 'F1'){ %>
                <li>
                    <a href="/invoiceModule/invoiceDetails/chooseinvoiceDetails">
                        <i class="material-icons">storage</i>
                        <p>Invoice Management</p>
                    </a>
                </li>
                <% } %>

                <% if(emp_access != 'A1'){ %>
                <li>
                   <% if(emp_access != "F1" ){ %>
                    <a href="/reimbursementModule/initiateRem/initiateRem">
                        <i class="material-icons">receipt</i>
                        <p>Claims</p>
                    </a>
                   <%}else{%>
                    <a href="/reimbursementModule/initiateRem/reimburseHrReqQueue">
                        <i class="material-icons">receipt</i>
                        <p>Claims</p>
                    </a>
                   <%}%>
                </li>
                <% } %>
            </ul>
        </div>
    </div>

    <div class="main-panel">
            <div class="container-fluid">
                <% include ../common/userBar %>
                <br>
        <div class="content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col">
                        <div class="card">
                            <div class="header2row">
				<nav class="navbar navbar-inverse">
  				<ul class="nav navbar-nav" style="color:#669999">
					<% if(emp_access == 'A1'){ %>
					<li><a href="/employeeModule/employeeDetails/employeeDetails">Add Professional Details</a></li>
					<li><a href="/employeeModule/employeeDetails/employeeDetailsModify">Modify Professional Details</a></li>
					<li><a href="/employeeModule/employeeDetails/employeeDetailsView">View Employee's Details</a></li>
					<li><a href="/employeeModule/employeeDetails/employeeApprovalDetails">Verify Personal Details</a></li>
					<li><a href="/employeeModule/employeeDetails/employeeSavedDetails">Verify Migrated Professional Details</a></li>
					<li><a href="/employeeModule/employeeDetails/migApprovalDetails">Verify Migrated Personal Details</a></li>
					<li><a href="/employeeModule/employeeDetails/employeeFAQDetails">FAQ</a></li>
					<%}%>

					<% if(emp_access != 'A1' && emp_access != 'F1'){ %>
					<li><a href="/employeeModule/employeeDetails/employeeAddpersonal">Add Personal Details</a></li>
					<li><a href="/employeeModule/employeeDetails/employeeDetailsViewUser">View Details</a></li>
					<li><a href="/employeeModule/employeeDetails/employeePersonalMod"><span style="color:#ff6600">Modify Personal Details</span></a></li>
					<li><a href="/employeeModule/employeeDetails/employeeFAQDetails">FAQ</a></li>
					<%}%>

					<% if(emp_access == 'F1'){ %>
					<li><a href="/employeeModule/employeeDetails/employeeAddpersonal">Add Personal Details</a></li>
					<li><a href="/employeeModule/employeeDetails/employeeDetailsViewUser">View Details</a></li>
					<li><a href="/employeeModule/employeeDetails/employeePersonalMod">Modify Personal Details</a></li>
					<li><a href="/employeeModule/employeeDetails/employeeDetailsViewFin">View Employee's Details</a></li>
					<li><a href="/employeeModule/employeeDetails/employeePersonalModFin"><span style="color:#ff6600">Update Employee's Bank Details</span></a></li>
					<li><a href="/employeeModule/employeeDetails/employeeFAQDetails">FAQ</a></li>
					<%}%>
  				</ul>
				</nav>
                                </div>
                            	<div class="content">
                                <form name="myFormSearch" id="myFormSearch" action="#">
				<hr/>
				<h4 class="title">Search Bank Details for Employee's    <i class="material-icons right">search</i></h4>
				<hr/>
				<div class="row">
                                        <div class="col-md-5">
                                            <div class="form-group">
                                <label for="empid" style="color:#404040;margin-left: 50px">Select Employee Id <span style="color:red;font-size: 10pt">*</span></label>
				<select class="form-control" style ="margin-left: 50px;width:348px;text-transform: uppercase" onchange="getOtherDetails();" id="empid" name="empid"/>
						<% if(emp_id_count == "0") {%>
                                                <option value="" disabled selected>No Records Found</option>
						<%} else {%>
                                                <option value="" disabled selected>Select The Employee Id</option>
						<% for (i=1; i<emp_id_count; i++) {%>
                                                <option value="<%= employee[i].emp_id %>"><%= employee[i].emp_id %> - <%= employee[i].emp_name %></option>
						<%};%>
						<%}%>
                                </select>
                                            </div>
                                        </div>
                                

				<div class="row">
                                        <div class="col-md-5">
                                            <div class="form-group">
                                                <label style="color:#404040;margin-left: 50px" for="empName">Employee Name <span style="color:red;font-size: 10pt">*</span></label>
                                                <input type="text" readonly style ="margin-left: 50px;width:348px" name="empName" id="empName" name="empName" class="form-control" placeholder="Employee Name" maxlength="100">
                                            </div>
                                        </div>
                                </div>

				<br>
                                <button class="btn btn-info btn-fill" style="margin-left:70px;padding:1px 16px;height:33px;width:80px" onclick="resetformSearch();">Clear</button>
				</form>
                                        
				<br>
				<br>
				<hr/>
				<h4 class="title" style="margin-left:10px;">Bank Details     <i class="material-icons right">business</i></h4>
				<hr/>
                                <form name="myForm" id="myForm" action="/employeeModule/employeeDetails/modempdetperFin" method="post" onsubmit="return formValidations()">
				<div class="row">
					<div class="col-md-5">
                                            <div class="form-group">
                                                <label for="nameinBank" style="color:#404040;margin-left: 50px">Name As per Bank <span style="color:red;font-size: 10pt">*</span></label>
                                                <input type="text" style ="margin-left: 50px;width:348px" id="nameinBank" name="nameinBank" class="form-control" placeholder="Name As Per Bank" maxlength="100">
                                                <input type="hidden" name="employee_id" id="employee_id" value="<%= employee_id %>">
                                            </div>
                                        </div>
                                        
					<div class="col-md-5">
                                            <div class="form-group">
                                                <label for="bankName" style="color:#404040;margin-left: 50px">Bank Name <span style="color:red;font-size: 10pt">*</span></label>
                                                <input type="text" style ="margin-left: 50px;width:348px" id="bankName" name="bankName" maxlength="16" class="form-control" placeholder="Bank Name" maxlength="100">
                                            </div>
                                        </div>
                                </div>
					
				<div class="row">
					<div class="col-md-5">
                                            <div class="form-group">
                                                <label for="branchName" style="color:#404040;margin-left: 50px">Branch Name <span style="color:red;font-size: 10pt">*</span></label>
                                                <input type="text" style ="margin-left: 50px;width:348px" id="branchName" name="branchName" class="form-control" placeholder="Branch Name" maxlength="100">
                                            </div>
                                        </div>
					
					<div class="col-md-5">
                                            <div class="form-group">
                                                <label for="acctNum" style="color:#404040;margin-left: 50px">Account Number <span style="color:red;font-size: 10pt">*</span></label>
                                                <input type="text" style ="margin-left: 50px;width:348px" id="acctNum" name="acctNum" class="form-control" placeholder="Account Number" maxlength="17">
                                            </div>
					</div>
				</div>

				<div class="row">
					<div class="col-md-5">
                                            <div class="form-group">
                                                <label for="ifscCode" style="color:#404040;margin-left: 50px">IFSC Code <span style="color:red;font-size: 10pt">*</span></label>
                                                <input type="text" style ="margin-left: 50px;width:348px" id="ifscCode" name="ifscCode" class="form-control" placeholder="IFSC Code" maxlength="15">
                                            </div>
                                        </div>
				</div>
				    <br>
				    <br>
				    <table>
				    <tr>
                                    <td><input type="submit" class="btn btn-info btn-fill" style="margin-left:30%;padding:1px 16px;height:40px;width:130px" id="Modify" value="Modify Profile"></td>
                                    <td><input type="button" class="btn btn-info btn-fill" style="margin-left:50%;padding:1px 16px;height:40px;width:100px" id="clrbtn" value="Clear" onclick="resetform()"></td>
				    </tr>
				    </table>
                                    <div class="clearfix"></div>
				    <br>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
	<% include ../common/footer %>
</div>
</body>

    <!--   Core JS Files   -->
    <!--   for date field add this   -->
    <!--<script src="/js/bootstrap.min.js" type="text/javascript"></script>-->

    <!--  Checkbox, Radio & Switch Plugins -->
    <script src="/js/bootstrap-checkbox-radio-switch.js"></script>

    <!--  Charts Plugin -->
    <script src="/js/chartist.min.js"></script>

    <!--  Notifications Plugin    -->
    <script src="/js/bootstrap-notify.js"></script>

    <!--  Google Maps Plugin    -->
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>

    <!-- Light Bootstrap Table Core javascript and methods for Demo purpose -->
    <script src="/js/light-bootstrap-dashboard.js"></script>

    <!-- Light Bootstrap Table DEMO methods, don't include it in your project! -->
    <script src="/js/demo.js"></script>


    <% if(success!="") { %>
       <script type="text/javascript">
        $(document).ready(function(){

                demo.initChartist();

                $.notify({
                icon: 'fa fa-exclamation-circle',
                message:"<b><%= success %></b>"

            },{
                type: 'info',
                timer: 500
            });

        });
        </script>
    <%}%>

    <% if(error!="") { %>
      <script type="text/javascript">
      $(document).ready(function(){
      demo.initChartist();
      $.notify({
      icon: 'fa fa-exclamation-circle',
      message:"<b><%= error %></b>"
      },{
         type: 'danger',
         timer: 500
      });
      });
      </script>

     <%}%>

</html>
