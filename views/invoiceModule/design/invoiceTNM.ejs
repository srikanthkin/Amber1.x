<!doctype html>
<html lang="en">
<head>
            <meta charset="utf-8" />
            <link rel="icon" type="image/png" href="/images/full_logo_transparent.png">
            <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
            <title>Invoice Management</title>
            <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
            <meta name="viewport" content="width=device-width" />
	    <!-- To use it for Materialise CSS forms -->
            <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
            
            <!-- Bootstrap core CSS     -->
            <link href="/css/bootstrap.min.css" rel="stylesheet" />

            <!-- Animation library for notifications   -->
            <link href="/css/animate.min.css" rel="stylesheet"/>

            <!--  Light Bootstrap Table core CSS    -->
            <link href="/css/light-bootstrap-dashboard.css" rel="stylesheet"/>

            <!--  Date picker    -->
            <script type="text/javascript" src="//code.jquery.com/jquery-1.11.0.js"></script>
            <script type="text/javascript" src="http://amsul.ca/pickadate.js/vendor/pickadate/lib/picker.js"></script>
            <script type="text/javascript" src="http://amsul.ca/pickadate.js/vendor/pickadate/lib/picker.date.js"></script>
            <script type="text/javascript" src="http://amsul.ca/pickadate.js/vendor/pickadate/lib/picker.time.js"></script>
            <link rel="stylesheet" type="text/css" href="http://amsul.ca/pickadate.js/vendor/pickadate/lib/themes/classic.css">
            <link rel="stylesheet" type="text/css" href="http://amsul.ca/pickadate.js/vendor/pickadate/lib/themes/classic.date.css">
            <link rel="stylesheet" type="text/css" href="http://amsul.ca/pickadate.js/vendor/pickadate/lib/themes/classic.time.css">

            <!--  CSS for Demo Purpose, don't include it in your project     -->
            <link href="/css/demo.css" rel="stylesheet" />

            <!--     Fonts and icons     -->
            <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
            <link href='http://fonts.googleapis.com/css?family=Roboto:400,700,300' rel='stylesheet' type='text/css'>
            <link href="/css/pe-icon-7-stroke.css" rel="stylesheet" />

		<style>
        		body        
		     	{
                      		background-image: url("/images/loginbg.jpg");
                     	}
			
			.navbar .navbar-reverse 
			{
  				display: inline-block;
  				float: none;
  				vertical-align: top;
			}

			.navbar .navbar-collapse 
			{
  				text-align: center;
			}
                        
			table, tr, td
                        {
                            border: 0px;
                            padding: 2px;
                        }

                        table
                        {
                                border-spacing: 0px;
                        }

			
			hr {
                                border: none;
                                height: 1px;
                                color: #333; 
                                background-color: #333; 
                           }


             </style>

	     <script>

		function changeHashOnLoad()
		{
			window.location.href += "#";
			setTimeout("changeHashAgain()", "50");
		}
		function changeHashAgain()
		{
			window.location.href += "1";
		}
		var storedHash = window.location.hash;
		window.setInterval(function ()
		{
			if (window.location.hash != storedHash)
		{
			window.location.hash = storedHash;
		}
		}, 50);

	    </script>

	    <script type="text/javascript">

		$(window).load(function()
		{
			$('#invDate').pickadate(
			{
			selectMonths: true,
			selectYears: 100,
			format: 'yyyy-mm-dd',
			formatSubmit: 'yyyy-mm-dd',
			closeOnSelect: true,
			max:true,
			min:true
			});
		});

		$(document).ready(function() {
		$("#my-icon").click(function(){
		$( '#invDate' ).pickadate("open"),
		event.stopPropagation(),
		event.preventDefault()
		});
		});

                $(document).ready(function()
                {
                        $('#billedTo').keyup(function()
                        {
                                $(this).val($(this).val().toUpperCase());
                        });
                });

                $(document).ready(function()
                {
                        $('#invPO').keyup(function()
                        {
                                $(this).val($(this).val().toUpperCase());
                        });
                });

                $(document).ready(function()
                {
                        $('#particulars').keyup(function()
                        {
                                $(this).val($(this).val().toUpperCase());
                        });
                });

                $(document).ready(function()
                {
                        $('#sacNo').keyup(function()
                        {
                                $(this).val($(this).val().toUpperCase());
                        });
                });

                $(document).ready(function()
                {
                        $('#words').keyup(function()
                        {
                                $(this).val($(this).val().toUpperCase());
                        });
                });

		function formValidation()
		{

			var pid = document.getElementById("pid").value;
			if(pid == "")
			{
				alert("Select The Project Id");
				document.getElementById("pid").focus();
				return false;
			}

			var invDate = document.getElementById("invDate").value;
			if(invDate == "")
			{
				alert("Select the Invoice Date");
				document.getElementById("invDate").focus();
				return false;
			}
			
			var billedTo = document.getElementById("billedTo").value;
			if(billedTo == "")
			{
				alert("Please fill the Billed To Particulars");
				document.getElementById("billedTo").focus();
				return false;
			}
			
			var invPO = document.getElementById("invPO").value;
			if(invPO == "")
			{
				alert("Enter the Invoice as per Purchase Order Number");
				document.getElementById("invPO").focus();
				return false;
			}

			var mileStone = document.getElementById("mileStone").value;
			if(mileStone == "")
			{
				alert("Select The Project Milestone");
				document.getElementById("mileStone").focus();
				return false;
			}

			var particulars = document.getElementById("particulars").value;
			if(particulars == "")
			{
				alert("Enter The Particulars");
				document.getElementById("particulars").focus();
				return false;
			}


			var sacNo = document.getElementById("sacNo").value;
			if(sacNo == "")
			{
				alert("Enter the SAC Number");
				document.getElementById("sacNo").focus();
				return false;
			}
			else
			{

				if (isNaN(sacNo))
				{
					alert("SAC Number Should Contain Only Nummeric");
					document.getElementById("sacNo").focus();
					return false;
				}
			}
			
			var per = document.getElementById("per").value;
			if(per == "")
			{
				alert("Enter the Percentage Details");
				document.getElementById("per").focus();
				return false;
			}

			var amt = document.getElementById("amt").value;
			if(amt == "")
			{
				alert("Enter the Amount");
				document.getElementById("amt").focus();
				return false;
			}

                        var raisedBy = document.getElementById("raisedBy").value;
                        if(raisedBy == "")
                        {
                                alert("Select the Raised By Details");
                                document.getElementById("raisedBy").focus();
                                return false;
                        }

                        var desig = document.getElementById("desig").value;
                        if(desig == "")
                        {
                                alert("Select The Designation");
                                document.getElementById("desig").focus();
                                return false;
                        }

			return true;
		}

		function resetform()
		{
			document.getElementById("myForm").reset();

		}
		function percen()
		{
			var mileStone	=	document.getElementById("mileStone").value;	
			$.ajax({
			url:'/invoiceModule/invoiceDetails/percentage?mileStone='+mileStone,method:'get',success:function(resp,status){
			$('#per').val(resp.key);
		    	}
			});

		}
		function calcAmt()
		{
			var amount = document.getElementById("amt").value;
			var percentage = document.getElementById("per").value;
			var amount1 = (amount * percentage)/100;
			document.getElementById("amt").value = amount1;
			document.getElementById("total").value = amount1;
			calcTax();
		}
		function calcTax()
		{
			var taxPer = "9";
			var amount = document.getElementById("amt").value;
			var tax = (amount * taxPer) / 100;
			document.getElementById("cTax").value = tax;
			document.getElementById("sTax").value = tax;
			document.getElementById("total").value = amount;
			inWords(document.getElementById("total").value);
		}
			var a = ['','one ','two ','three ','four ', 'five ','six ','seven ','eight ','nine ','ten ','eleven ','twelve ','thirteen ','fourteen ','fifteen ','sixteen ','seventeen ','eighteen ','nineteen '];
			var b = ['', '', 'twenty','thirty','forty','fifty', 'sixty','seventy','eighty','ninety'];

			function inWords (num) 
			{
				if ((num = num.toString()).length > 9) return 'overflow';
				n = ('000000000' + num).substr(-9).match(/^(\d{2})(\d{2})(\d{2})(\d{1})(\d{2})$/);
				if (!n) return; var str = '';
				str += (n[1] != 0) ? (a[Number(n[1])] || b[n[1][0]] + ' ' + a[n[1][1]]) + 'crore ' : '';
				str += (n[2] != 0) ? (a[Number(n[2])] || b[n[2][0]] + ' ' + a[n[2][1]]) + 'lakh ' : '';
				str += (n[3] != 0) ? (a[Number(n[3])] || b[n[3][0]] + ' ' + a[n[3][1]]) + 'thousand ' : '';
				str += (n[4] != 0) ? (a[Number(n[4])] || b[n[4][0]] + ' ' + a[n[4][1]]) + 'hundred ' : '';
				str += (n[5] != 0) ? ((str != '') ? 'and ' : '') + (a[Number(n[5])] || b[n[5][0]] + ' ' + a[n[5][1]]) + 'only ' : '';
				document.getElementById("words").value = str.toUpperCase();
			}
	    </script>
</head>
<body onload="changeHashOnLoad();">
<div class="wrapper">
    <div class="sidebar" data-color="black" data-image="/images/loginbg.jpg">

        <div class="sidebar-wrapper">
            <div class="logo">
                <img src="/images/full_logo_transparent.png" alt="logo" width="100" height="80" />
                <a href="#" class="simple-text" style="font-size: 25px;font-weight: 900;">
                   Nurture&nbsp<span style="color: #ff9933">Portal</span>
                </a>
            </div>

            <ul class="nav">
                <li>
                    <a href="/admin-dashboard/adminDashboard/admindashboard">
                        <i class="pe-7s-graph"></i>
                        <p>Dashboard</p>
                    </a>
                </li>
                <li>
                    <a href="/employeeModule/employeeDetails/employeeDetails">
                        <i class="pe-7s-user"></i>
                        <p>Employee Details</p>
                    </a>
                </li>
                <li>
                    <a href="/projectModule/projectDetails/projectDetails">
                        <i class="pe-7s-note2"></i>
                        <p>Project Details</p>
                    </a>
                </li>
                <li>
                    <a href="appraisalModule/appraisal/appraisal">
                        <i class="pe-7s-news-paper"></i>
                        <p>Appraisal Module</p>
                    </a>
                </li>
                <li>
                    <a href="/cmsModule/cms/cms">
                        <i class="pe-7s-science"></i>
                        <p>E-Docket</p>
                    </a>
                </li>
                <li>
                    <a href="/assetModule/assetDetails/assetDetails">
                        <i class="pe-7s-science"></i>
                        <p>Asset Management</p>
                    </a>
                </li>
		<% if(emp_access == 'A1'){ %>
                <li class="active">
                    <a href="/invoiceModule/invoiceDetails/chooseinvoiceDetails">
                        <i class="pe-7s-science"></i>
                        <p>Invoice Management</p>
                    </a>
		<% } %>
                </li>
            </ul>
        </div>
    </div>

    <div class="main-panel">
    <div class="container-fluid">
        <nav class="navbar navbar-default navbar-fixed" style="height:55px;background-color:#202020;border-radius: 3px;">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navigation-example-2">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>

                </div>
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li>
                        <li class="">

                                <a class="user-profile dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                <img src="/images/profile/<%=eid%>.jpg" alt="logo"  style="border-radius: 30px;" width="60" height="60">&nbsp&nbsp<span style="text-transform:uppercase"><%=ename%></span>
                                <span class="fa fa-angle-down"></span>
                                </a>
                                <ul class="dropdown-menu dropdown-usermenu pull-right">
                               <li><a href="/logoutModule/logout/logout"><i class="fa fa-sign-out pull-right"></i> Log Out</a></li>
                                </ul>
                                </li>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col">
                        <div class="card">
                            <div class="header">
				<nav class="navbar navbar-inverse" style="color:#669999">
  				<ul class="nav navbar-nav" style="color:#669999">
				<% if(emp_access == 'A1'){ %>
                                <li><a href="/invoiceModule/invoiceDetails/invoiceTNM"><span style="color:#ff6600">RAISE INVOICE</span></a></li>
				<% } %>
  				</ul>
				</nav>
                            </div>
                            <div class="content">
				<form name="myForm" id="myForm" action="/invoiceModule/invoiceDetails/addInvoice" method="post">
				<hr/>
				<h4 class="title" style ="margin-left: 350px;">Invoice Management     <i class="material-icons right">note</i></h4>
				<hr/>


				<div class="row">
                                   <div class="col-md-5">
                                      <div class="form-group">
                                         <label style="color:#404040;margin-left: 50px">Project Id <span style="color:red;font-size: 10pt">*</span></label>
                                         <select class="form-control" id="pid" name="pid" style ="margin-left: 50px;width:348px">
					 <option value="<%= pid %>" selected> <%= pid %> </option>
                                         </select>
                                      </div>
                                   </div>

				   <div class="col-md-5">
				      <div class="form-group">
				    	<div class="datepicker">
				    	<table>
						<tr>
						<label style="color:#404040;margin-left: 50px">Invoice Date <span style="color:red;font-size: 10pt">*</span></label>
						<td><input type="text" class="form-control" style ="margin-left: 50px;width:348px" placeholder="Billing Date" id="invDate" name="invDate"></td>
						<td><span id="my-icon" class="glyphicon glyphicon-calendar"></span></td>
				    		</tr>
				    	</table>
			            	</div>
			              </div>
			      	    </div>
                              </div>


				<div class="row">
                                   <div class="col-md-5">
                                      <div class="form-group">
                                         <label style="color:#404040;margin-left: 50px">Billed To <span style="color:red;font-size: 10pt">*</span></label>
					<td><textarea rows="8" cols="30" style ="margin-left: 50px;width:348px;resize: none" name="billedTo" id="billedTo" placeholder="Enter details with Client GSTIN no"></textarea></td>
                                      </div>
                                   </div>

				   <div class="col-md-5">
                                      <div class="form-group">
                                         <label style="color:#404040;margin-left: 50px">Invoice as per Purchase Order Number <span style="color:red;font-size: 10pt">*</span></label>
					 <input type="text" style ="margin-left: 50px;width:348px;" id="invPO" name="invPO" class="form-control" placeholder="Enter your text (max 15 aplhanumeric) + GRN NO">
                                      </div>
                                   </div>
				</div>	


			<div class="row">
                             <div class="col-md-5">
                                  <div class="form-group">
					<div class="row">
                                <div class="col-md-5">
                                <div class="form-group">
                                <br>
                                <dl class="dropdown">
                                    <dt>
                                    <a href="#">Select Employees
                                <span class="fa fa-angle-down pull-right"></span>
                                    </a>
                                    </dt>

                                    <dd>
                                        <input type="hidden" id="empselected" name="empselected">
                                        <div class="mutliSelect">
                                            <ul>

                                                <% for (i = 0; i < empId_count; i++)  {%>
                                                <li>
                                                    <input style="text-transform: uppercase;" type="checkbox" name="selected[]" value="<%= empId[i].emp_id %>" /></li>
                                                <% }; %>
                                            </ul>
                                        </div>
                                    </dd>
                                </dl>
                        </div>
                        </div>
                        <div class="col-md-5">
                        <div class="form-group">
                               <dl class="dropd">
                                    <dt>
                                    <a>
                                      <p class="multiSel"></p>
                                    </a>
                                    </dt>
                                </dl>
                        </div>
                        </div>
                        </div>

                                  </div>
                             </div>

			   <div class="col-md-5">
			      <div class="form-group">
				 <label style="color:#404040;margin-left: 50px">Particulars <span style="color:red;font-size: 10pt">*</span></label>
				<td><textarea rows="8" cols="30" style ="margin-left: 50px;width:348px;resize: none" name="particulars" id="particulars" placeholder="Enter The Particulars"></textarea></td>
			      </div>
			   </div>
                       </div>

			<div class="row">
			     <div class="col-md-5">
                                   <div class="form-group">
                                    	<label style="color:#404040;margin-left: 50px">SAC Number <span style="color:red;font-size: 10pt">*</span></label>
                                        <input type="text" style ="margin-left: 50px;width:348px;" id="sacNo" name="sacNo" class="form-control">
                                   </div>
                             </div>

			   <!--<div class="col-md-5">
			      <div class="form-group">
				 <label style="color:#404040;margin-left: 50px">Percentage <span style="color:red;font-size: 10pt">*</span></label>
				<input type="text" style ="margin-left: 50px;width:348px;" id="per" name="per" required class="form-control" onchange="calcAmt();">
			      </div>
			   </div>-->
		       </div>


			<div class="row">
			  <div class="col-md-5">
			      <div class="form-group">
				 <label style="color:#404040;margin-left: 50px">Amount <span style="color:red;font-size: 10pt">*</span></label>
				 <input type="text" style ="margin-left: 50px;width:348px;" id="amt" name="amt" required onblur="calcTax();" class="form-control" value="<%=project_budget[0].project_budget%>" >
			      </div>
			   </div>

			   <div class="col-md-5">
			      <div class="form-group">
				 <label style="color:#404040;margin-left: 50px">Central Tax <span style="color:red;font-size: 10pt">*</span></label>
				 <input type="text" style ="margin-left: 50px;width:348px;" id="cTax" name="cTax" disabled  required class="form-control">
			      </div>
			   </div>
			</div>


			<div class="row">
			  <div class="col-md-5">
			      <div class="form-group">
				 <label style="color:#404040;margin-left: 50px">State Tax <span style="color:red;font-size: 10pt">*</span></label>
				 <input type="text" style ="margin-left: 50px;width:348px;" id="sTax" name="sTax" disabled required class="form-control">
			      </div>
			   </div>

			   <div class="col-md-5">
			      <div class="form-group">
				 <label style="color:#404040;margin-left: 50px">Total <span style="color:red;font-size: 10pt">*</span></label>
				 <input type="text" style ="margin-left: 50px;width:348px;" id="total" name="total" required disabled  class="form-control" value="<%=project_budget[0].project_budget%>" >
			      </div>
			   </div>
			</div>

			<div class="row">
			  <div class="col-md-5">
			      <div class="form-group">
				 <label style="color:#404040;margin-left: 50px">In Words <span style="color:red;font-size: 10pt">*</span></label>
				 <input type="text" style ="margin-left: 50px;width:348px;" id="words" name="words" required disabled  class="form-control">
			      </div>
			   </div>

			    <div class="col-md-5">
				 <div class="form-group">
					<label for="povalue" style="color:#404040;margin-left: 50px">Raised By <span style="color:red;font-size: 10pt">*</span></label>
					<input type="text" style ="margin-left: 50px;width:348px;" id="raisedBy" name="raisedBy" disabled  class="form-control" value = "<%= ename %>" >
				  </div>
			    </div>
			</div>

			<div class="row">
			    <div class="col-md-5">
				<div class="form-group">
					<label for="Noofppl" style="color:#404040;margin-left: 50px">Designation<span style="color:red;font-size: 10pt">*</span></label>
					<input type="text" style ="margin-left: 50px;width:348px;" id="desig" name="desig" disabled  class="form-control" >
				</div>
			    </div>

			    <div class="col-md-5">
				 <div class="form-group">
					<label for="povalue" style="color:#404040;margin-left: 50px">GSTIN </label>
					<input type="text" style ="margin-left: 50px;width:348px;" id="gstin" name="gstin"  class="form-control" value="29AACCN0302P1ZF" readonly>
				    </div>
				</div>
			</div>

			<div class="row">
				<div class="col-md-5">
				    <div class="form-group">
					<label for="Noofppl" style="color:#404040;margin-left: 50px">PAN No.</label>
					<input type="text" style ="margin-left: 50px;width:348px;" id="panNo" name="panNo"  class="form-control" value="AACCN0302P" readonly>
				    </div>
				</div>
			</div>
				    <table>
                                    <tr>
				    <br>
                                    <td><input type="button" style="margin-left:305%;padding:1px 16px;height:40px;width:100px" class="btn btn-info btn-fill" style="float: center;" value="Clear" onclick="return resetform()"></td>
                                                <td><input type="submit" name="test" id="test" style="margin-left:325%;padding:1px 16px;height:40px;width:100px" class="btn btn-info btn-fill" style="float: center;" value="Submit" onclick="return formValidation()"></td>
                                    </tr>
                                    </table>
                                    <div class="clearfix"></div>
				    <br>
				    <br>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer class="footer">
            <div class="container-fluid">
                <p class="copyright pull-right">
                    &copy; 2017 <a href="http://nurture.co.in/">Nurture Software Solutions Pvt Ltd</a>
                </p>
            </div>
        </footer>
    </div>
    </div>
</body>
    <!--   Core JS Files   -->
    <!--   for date field add this   -->
    <script src="assets/js/jquery-1.10.2.js" type="text/javascript"></script>
    <script src="/js/bootstrap.min.js" type="text/javascript"></script>

    <!--  Checkbox, Radio & Switch Plugins -->
    <script src="/js/bootstrap-checkbox-radio-switch.js"></script>

    <!--  Charts Plugin -->
    <script src="/js/chartist.min.js"></script>

    <!--  Notifications Plugin    -->
    <script src="/js/bootstrap-notify.js"></script>

    <!--  Google Maps Plugin    -->
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>

    <!-- Light Bootstrap Table Core javascript and methods for Demo purpose -->
    <script src="/js/light-bootstrap-dashboard.js"></script>

    <!-- Light Bootstrap Table DEMO methods, don't include it in your project! -->
    <script src="/js/demo.js"></script>

   <% if(success!="") { %>
       <script type="text/javascript">
        $(document).ready(function(){

                demo.initChartist();

                $.notify({
                icon: 'pe-7s-gift',
                message:"<b><%= success %></b>"

            },{
                type: 'info',
                timer: 500
            });

        });
        </script>
    <%}%>

    <% if(error!="") { %>
      <script type="text/javascript">
      $(document).ready(function(){
      demo.initChartist();
      $.notify({
      icon: 'pe-7s-gift',
      message:"<b><%= error %></b>"
      },{
         type: 'danger',
         timer: 500
      });
      });
      </script>
     <%}%>
</html>
